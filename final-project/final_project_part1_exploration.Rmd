---
title: "INFSCI 2595 Final"
subtitle: "Part 1a: EDA (Variable distributions)"
author: "Ben Stein"
date: "3/23/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# About this document

In this document, I examine the distributions and counts of the variables in the dataset supplied for the final project.

# Setup

## Libraries

```{r}
library(tidyverse)
library(visdat)
```

## My tools

```{r}
source("./tools.R")
```


## Load (tidied) data

```{r}
df <- load_project_data(info = list(
  convert_data_types = TRUE,
  response_to_log = FALSE
))
```

# Distributions and counts

## Missing values

```{r}
visdat::vis_miss(df)
```

## Continuous predictors (all sentiment-related variables)

Because there are many (`r df %>% select(where(is.numeric)) %>% length`, to be exact) continuous predictors, let's examine their distributions in qualitative groups (i.e. grouped by the methods by which they are derived). Let's put together a quick function so we can easily visualizes different groups of predictors:

```{r}
visualize_distributions <- function(x, column_name_start) {
  x %>%
    select(starts_with(column_name_start)) %>%
    pivot_longer(cols = everything()) %>%
    ggplot(mapping = aes(x = value)) +
    geom_histogram(bins = 50) +
    facet_wrap(~name, scales = "free") + 
    theme_bw() +
    theme(axis.text.y = element_blank())
}
```

### Lexicon: Bing

```{r}
df %>% visualize_distributions("xb_")
```

The figure suggests that most of the Bing lexicon features have approximately Gaussian distribution, though some seem slightly less so (e.g. `xb_05`, `xb_07`, `xb_08`).

```{r}
df %>%
  select("region", starts_with("xb_")) %>%
  pivot_longer(cols = starts_with("xb_")) %>%
  ggplot(mapping = aes(x = value)) +
  geom_histogram(bins = 50) +
  facet_grid(region ~ name, scales = "free") + 
  theme_bw() +
  theme(axis.text.y = element_blank())
```

### Lexicon: NRC

```{r}
df %>% visualize_distributions("xn_")
```

Similar to the Bing lexicon features, the NRC lexicon features are roughly Gaussian with some possible exceptions (e.g. `xn_07`, and `xn_06` seems slightly right-tailed).

### Lexicon: AFINN

```{r}
df %>% visualize_distributions("xa_")
```

The AFINN lexicon features appear Gaussian, though `xa_06` seems right-tailed.

### Word-count features

```{r}
df %>% visualize_distributions("xw_")
```

Only one of the word-count-based features appears Gaussian (`xw_01`). `xw_02`seems right-tailed, while `xw_03` seems left-tailed.

### `sentimentr` features

```{r}
df %>% visualize_distributions("xs_")
```

